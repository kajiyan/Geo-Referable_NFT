# NOROSI Smart Contracts

åœ°ç†åº§æ¨™ãƒ™ãƒ¼ã‚¹ã®NFTï¼ˆGeoRelationalNFTï¼‰ã®ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆå®Ÿè£…ã§ã™ã€‚

## ğŸ“‹ ç›®æ¬¡

- [æ¦‚è¦](#æ¦‚è¦)
- [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
- [ä¸»è¦ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆ](#ä¸»è¦ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆ)
- [ãƒ©ã‚¤ãƒ–ãƒ©ãƒª](#ãƒ©ã‚¤ãƒ–ãƒ©ãƒª)
- [ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹](#ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹)
- [ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ](#ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ)
- [é–‹ç™º](#é–‹ç™º)

---

## æ¦‚è¦

ã“ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ã€**NOROSI**ãƒ–ãƒ©ãƒ³ãƒ‰ã®åœ°ç†åº§æ¨™ãƒ™ãƒ¼ã‚¹NFTã‚·ã‚¹ãƒ†ãƒ ã‚’å®Ÿè£…ã™ã‚‹ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆç¾¤ã§ã™ã€‚

### ä¸»ãªæ©Ÿèƒ½

- ğŸ—ºï¸ **åœ°ç†åº§æ¨™ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°**: TokenIDã«ç·¯åº¦ãƒ»çµŒåº¦ã‚’åŸ‹ã‚è¾¼ã¿ï¼ˆãƒŸãƒªã‚ªãƒ³ã‚¹å˜ä½ï¼‰
- ğŸ”— **ERC-5521 Referable NFT**: ãƒˆãƒ¼ã‚¯ãƒ³é–“ã®åŒæ–¹å‘å‚ç…§é–¢ä¿‚
- ğŸ¨ **ã‚ªãƒ³ãƒã‚§ãƒ¼ãƒ³SVGç”Ÿæˆ**: 9-12KBã®å‹•çš„SVGã‚’å®Œå…¨ã‚ªãƒ³ãƒã‚§ãƒ¼ãƒ³ã§ç”Ÿæˆ
- ğŸ“ **4ãƒ¬ãƒ™ãƒ«H3ã‚¸ã‚ªã‚¹ãƒ‘ãƒ¼ã‚·ãƒ£ãƒ«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**: r6/r8/r10/r12ã®å¤šè§£åƒåº¦æ¤œç´¢
- ğŸ” **EIP-712ç½²åãƒŸãƒ³ãƒˆ**: ã‚¬ã‚¹ãƒ¬ã‚¹ãƒŸãƒ³ãƒˆã®ãŸã‚ã®æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ç½²å
- ğŸ’¾ **ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ãƒ†ã‚­ã‚¹ãƒˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸**: 54ãƒã‚¤ãƒˆä»¥ä¸‹ã¯ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã€55ãƒã‚¤ãƒˆä»¥ä¸Šã¯SSTORE2

### ãƒˆãƒ¼ã‚¯ãƒ³æ¨™æº–

- **ERC-721**: åŸºæœ¬çš„ãªNFTæ©Ÿèƒ½
- **ERC-721 Enumerable**: ãƒˆãƒ¼ã‚¯ãƒ³åˆ—æŒ™ã‚µãƒãƒ¼ãƒˆ
- **ERC-5521**: å‚ç…§å¯èƒ½NFTï¼ˆåŒæ–¹å‘å‚ç…§ï¼‰
- **ERC-4906**: ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æ›´æ–°ã‚¤ãƒ™ãƒ³ãƒˆ

---

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ä¾å­˜é–¢ä¿‚å›³

```mermaid
graph TD
    %% Main Contract
    GeoNFT[GeoRelationalNFT.sol]

    %% SVG Generation
    Fumi[Fumi.sol]

    %% Libraries
    DateTime[DateTime.sol]
    NOROSIFont[NOROSIFont.sol]
    GeoMath[GeoMath.sol]
    GeoMetadata[GeoMetadata.sol]
    SSTORE2[SSTORE2.sol]
    SafeCall[SafeExternalCall.sol]

    %% Interfaces
    IFumi[IFumi.sol]
    IGeoMath[IGeoMath.sol]
    IGeoMetadata[IGeoMetadata.sol]
    IDateTime[IDateTime.sol]
    IERC5521[IERC5521.sol]
    IERC4906[IERC4906.sol]

    %% Dependencies
    GeoNFT -->|uses| IFumi
    GeoNFT -->|uses| IGeoMath
    GeoNFT -->|uses| IGeoMetadata
    GeoNFT -->|uses| SSTORE2
    GeoNFT -->|uses| SafeCall
    GeoNFT -->|implements| IERC5521
    GeoNFT -->|implements| IERC4906

    Fumi -->|uses| IDateTime
    Fumi -->|uses| NOROSIFont
    Fumi -->|implements| IFumi

    DateTime -->|implements| IDateTime
    GeoMath -->|implements| IGeoMath
    GeoMetadata -->|implements| IGeoMetadata
    GeoMetadata -->|uses| SafeCall

    %% Deployment Order
    IFumi -.->|deployed| Fumi
    IGeoMath -.->|deployed| GeoMath
    IGeoMetadata -.->|deployed| GeoMetadata
    IDateTime -.->|deployed| DateTime

    DateTime -.->|address| Fumi
    NOROSIFont -.->|address| Fumi
    Fumi -.->|address| GeoNFT
    GeoMath -.->|address| GeoNFT
    GeoMetadata -.->|address| GeoNFT

    style GeoNFT fill:#e1f5ff,stroke:#0288d1,stroke-width:3px
    style Fumi fill:#fff9c4,stroke:#f57f17,stroke-width:2px
    style DateTime fill:#f3e5f5,stroke:#7b1fa2,stroke-width:1px
    style NOROSIFont fill:#f3e5f5,stroke:#7b1fa2,stroke-width:1px
    style GeoMath fill:#f3e5f5,stroke:#7b1fa2,stroke-width:1px
    style GeoMetadata fill:#f3e5f5,stroke:#7b1fa2,stroke-width:1px
    style SSTORE2 fill:#e8f5e9,stroke:#388e3c,stroke-width:1px
    style SafeCall fill:#e8f5e9,stroke:#388e3c,stroke-width:1px
```

### ASCIIç‰ˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     GeoRelationalNFT.sol                        â”‚
â”‚                         (Main NFT)                              â”‚
â”‚                                                                 â”‚
â”‚  ãƒ»ERC-721 + Enumerable                                         â”‚
â”‚  ãƒ»ERC-5521 (Referable NFT)                                     â”‚
â”‚  ãƒ»ERC-4906 (Metadata Update)                                   â”‚
â”‚  ãƒ»EIP-712 (Signed Minting)                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚              â”‚            â”‚           â”‚
            â–¼              â–¼            â–¼           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Fumi    â”‚  â”‚ GeoMath  â”‚  â”‚GeoMetadataâ”‚  â”‚ SSTORE2 â”‚
    â”‚  (SVG)    â”‚  â”‚(Distance)â”‚  â”‚ (Format) â”‚  â”‚ (Text)  â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                            â”‚
          â–¼                            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ DateTime â”‚              â”‚SafeExternal  â”‚
    â”‚(Convert) â”‚              â”‚Call (Safe)   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â–²
          â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚NOROSIFont â”‚
    â”‚  (Font)   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹é€ 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Layer 4: Application (Main NFT)      â”‚  â† GeoRelationalNFT.sol
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    Layer 3: Logic (Business Logic)      â”‚  â† Fumi.sol, GeoMath.sol, GeoMetadata.sol
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    Layer 2: Data (Resources)            â”‚  â† NOROSIFont.sol, DateTime.sol
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    Layer 1: Utilities (Libraries)       â”‚  â† SSTORE2.sol, SafeExternalCall.sol
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸»è¦ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆ

### 1. GeoRelationalNFT.sol

**å½¹å‰²**: ãƒ¡ã‚¤ãƒ³ã®NFTã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆ

**æ©Ÿèƒ½**:
- åœ°ç†åº§æ¨™ï¼ˆç·¯åº¦ãƒ»çµŒåº¦ãƒ»æ¨™é«˜ï¼‰ã‚’TokenIDã«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰
- ERC-5521ã«ã‚ˆã‚‹åŒæ–¹å‘ãƒˆãƒ¼ã‚¯ãƒ³å‚ç…§é–¢ä¿‚ã®ç®¡ç†
- EIP-712ç½²åã‚’ç”¨ã„ãŸã‚¬ã‚¹ãƒ¬ã‚¹ãƒŸãƒ³ãƒˆ
- ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ãƒ†ã‚­ã‚¹ãƒˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼ˆã‚¤ãƒ³ãƒ©ã‚¤ãƒ³/SSTORE2ï¼‰
- 4ãƒ¬ãƒ™ãƒ«H3ã‚¸ã‚ªã‚¹ãƒ‘ãƒ¼ã‚·ãƒ£ãƒ«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆr6, r8, r10, r12ï¼‰

**ä¸»è¦ãªçŠ¶æ…‹å¤‰æ•°**:
```solidity
// External Contracts (immutable)
IFumi public immutable fumi;          // SVGç”Ÿæˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆ
IGeoMath public immutable geoMath;    // è·é›¢è¨ˆç®—ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆ
IGeoMetadata public immutable geoMetadata; // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆ

// Geographic Data
mapping(uint256 => string) private _h3r6;     // H3è§£åƒåº¦6
mapping(uint256 => string) private _h3r8;     // H3è§£åƒåº¦8
mapping(uint256 => string) private _h3r10;    // H3è§£åƒåº¦10
mapping(uint256 => string) private _h3r12;    // H3è§£åƒåº¦12

// Token Attributes
mapping(uint256 => int256) private _tokenElevations;      // æ¨™é«˜
mapping(uint256 => uint256) private _tokenColorIndexes;   // è‰²ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ (0-255)
mapping(uint256 => uint256) private _tokenTrees;          // ãƒ„ãƒªãƒ¼ã‚¿ã‚¤ãƒ—
mapping(uint256 => uint256) private _tokenGenerations;    // ä¸–ä»£ç•ªå·

// Reference System (ERC-5521)
mapping(uint256 => Reference[]) private _tokenReferences;
mapping(address => mapping(uint256 => uint256[])) private _referredBy;

// Text Storage (Hybrid)
mapping(uint256 => string) private _texts;                // ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ (â‰¤54 bytes)
mapping(uint256 => address) private _textPointers;        // SSTORE2 (â‰¥55 bytes)
```

**TokenIDã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°**:
```
tokenId = quadrant Ã— 10^20 + |latitude| Ã— 10^10 + |longitude|

Quadrant (è±¡é™):
  0: (+lat, +lon) - åŒ—æ±
  1: (-lat, +lon) - å—æ±
  2: (+lat, -lon) - åŒ—è¥¿
  3: (-lat, -lon) - å—è¥¿

ä¾‹: æ±äº¬ (35.6789Â°, 139.7661Â°)
  â†’ quadrant=0, lat=35678900, lon=139766100
  â†’ tokenId = 0Ã—10^20 + 35678900Ã—10^10 + 139766100
```

**ä¸»è¦ãªé–¢æ•°**:
```solidity
// ãƒŸãƒ³ãƒˆ
function mint(...) external onlyOwner whenNotPaused returns (uint256);
function mintWithChain(...) external onlyOwner whenNotPaused returns (uint256);

// ç½²åãƒŸãƒ³ãƒˆ (EIP-712)
function signedMint(..., bytes calldata signature) external whenNotPaused returns (uint256);
function signedMintWithChain(..., bytes calldata signature) external whenNotPaused returns (uint256);

// TokenIDã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰/ãƒ‡ã‚³ãƒ¼ãƒ‰
function encodeTokenId(int256 latitude, int256 longitude) public pure returns (uint256);
function decodeTokenId(uint256 tokenId) public view returns (DecodedTokenData memory);

// ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
function tokenURI(uint256 tokenId) public view override returns (string memory);

// ERC-5521
function referredOf(address contractAddr, uint256 tokenId)
    external view returns (address[] memory, uint256[] memory);
```

**ç¶™æ‰¿ãƒã‚§ãƒ¼ãƒ³**:
```
GeoRelationalNFT
â”œâ”€ ERC721 (OpenZeppelin)
â”œâ”€ ERC721Enumerable (OpenZeppelin)
â”œâ”€ IERC5521 (Custom)
â”œâ”€ IERC4906 (Custom)
â”œâ”€ Ownable (OpenZeppelin)
â”œâ”€ Pausable (OpenZeppelin)
â””â”€ EIP712 (OpenZeppelin)
```

**ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚µã‚¤ã‚º**: ~23 KBï¼ˆ24KBåˆ¶é™å†… âœ…ï¼‰

---

### 2. Fumi.sol

**å½¹å‰²**: ã‚ªãƒ³ãƒã‚§ãƒ¼ãƒ³SVGç”Ÿæˆ

**åå‰ã®ç”±æ¥**: "ç…™"ï¼ˆãµã¿ï¼‰- æ³¢ã®ã‚ˆã†ãªå‹•çš„ãªãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã‚’ç”Ÿæˆ

**æ©Ÿèƒ½**:
- å®Œå…¨ã‚ªãƒ³ãƒã‚§ãƒ¼ãƒ³ã§ã®9-12KB SVGç”Ÿæˆ
- ã‚µã‚¤ãƒ³æ³¢ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ2703ãƒã‚¤ãƒˆã®LUTã‚’ä½¿ç”¨ï¼‰
- æ—¥ä»˜ãƒ»æ™‚åˆ»è¡¨ç¤ºï¼ˆDateTimeé€£æºï¼‰
- NOROSI ã‚«ã‚¹ã‚¿ãƒ ãƒ•ã‚©ãƒ³ãƒˆåŸ‹ã‚è¾¼ã¿
- è‰²ã®è¦–è¦šåŒ–ï¼ˆcolorIndex: 0-13ï¼‰
- å‚ç…§ã‚«ã‚¦ãƒ³ãƒˆãƒ»ä¸–ä»£ç•ªå·ãƒãƒƒã‚¸

**ä¸»è¦ãªå®šæ•°**:
```solidity
uint256 internal constant TWO_PI_1e4 = 62832;    // â‰ˆ 2Ï€ Ã— 10^4
uint256 internal constant STEP_1e4   = 137_931;  // 13.7931 Ã— 10^4

// 2703ãƒã‚¤ãƒˆã®ã‚µã‚¤ãƒ³LUTï¼ˆLook-Up Tableï¼‰
bytes constant SINE_LUT = hex"0000010203050608...";
```

**ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ä¾å­˜**:
```solidity
constructor(address _datetimeAddress, address _norosiFontAddress) {
    datetime = IDateTime(_datetimeAddress);
    norosiFont = IFont(_norosiFontAddress);
}
```

**ä¸»è¦ãªé–¢æ•°**:
```solidity
function tokenSVG(TokenSVGParams memory params)
    external view returns (string memory);
```

**ã‚¬ã‚¹æœ€é©åŒ–æ‰‹æ³•**:
- âœ… å¤§ããªãƒãƒƒãƒ•ã‚¡ã¸ã®ç›´æ¥æ›¸ãè¾¼ã¿ï¼ˆ`abi.encodePacked`ã®ç¹°ã‚Šè¿”ã—å›é¿ï¼‰
- âœ… ã‚µã‚¤ãƒ³LUTã«ã‚ˆã‚‹ä¸‰è§’é–¢æ•°è¨ˆç®—ã®é«˜é€ŸåŒ–
- âœ… ãƒ•ã‚§ãƒ¼ãƒ‰ä¿‚æ•°ã®äº‹å‰è¨ˆç®—ã¨å†åˆ©ç”¨
- âœ… ã‚¹ã‚¿ãƒƒã‚¯æ·±åº¦ã‚¨ãƒ©ãƒ¼å›é¿ã®ãŸã‚ã®é–¢æ•°åˆ†å‰²

**ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚µã‚¤ã‚º**: ~12 KB

---

## ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

### 3. GeoMath.sol

**å½¹å‰²**: åœ°ç†åº§æ¨™é–“ã®è·é›¢è¨ˆç®—

**æ©Ÿèƒ½**:
- 2ç‚¹é–“ã®è·é›¢ã‚’ãƒ¡ãƒ¼ãƒˆãƒ«å˜ä½ã§è¨ˆç®—
- ãƒ†ã‚¤ãƒ©ãƒ¼ç´šæ•°è¿‘ä¼¼ã«ã‚ˆã‚‹é«˜é€ŸåŒ–: `cos(x) â‰ˆ 1 - xÂ²/2`
- ç·¯åº¦ã«ã‚ˆã‚‹è·é›¢è£œæ­£

**ä¸»è¦ãªé–¢æ•°**:
```solidity
function calculateDistance(
    int256 lat1, int256 lon1,
    int256 lat2, int256 lon2
) external pure returns (uint256);
```

**è¨ˆç®—å¼**:
```
ç·¯åº¦å·®ã«ã‚ˆã‚‹è·é›¢: deltaLat Ã— 111,132 meters/degree
çµŒåº¦å·®ã«ã‚ˆã‚‹è·é›¢: deltaLon Ã— 111,132 Ã— cos(avgLat) meters/degree
ç·è·é›¢: âˆš(latDistÂ² + lonDistÂ²)
```

**ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚µã‚¤ã‚º**: ~2 KB

---

### 4. GeoMetadata.sol

**å½¹å‰²**: ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå‡¦ç†

**æ©Ÿèƒ½**:
- åº§æ¨™æ–‡å­—åˆ—ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆé©åˆ‡ãªå°æ•°ç‚¹è¡¨ç¤ºï¼‰
- æ¨™é«˜ã®åœ°å½¢åˆ†é¡ï¼ˆæµ·åº•ã€å¹³åœ°ã€å±±å²³ãªã©ï¼‰
- è·é›¢ã®kmå¤‰æ›ã¨å°æ•°ç‚¹è¡¨ç¤º
- å±æ€§é…åˆ—ã®ç”Ÿæˆ
- ãƒ¬ã‚¢ãƒªãƒ†ã‚£è¨ˆç®—ï¼ˆæ¥µåœ°ã€æ¥µç«¯ãªæ¨™é«˜ãªã©ï¼‰

**ä¸»è¦ãªé–¢æ•°**:
```solidity
function formatMetadata(
    uint256 tokenId,
    DecodedTokenData memory data,
    string memory h3r6,
    string memory h3r8,
    string memory h3r10,
    string memory h3r12,
    uint256 totalDistance,
    uint256 refCount,
    uint256 timestamp
) external pure returns (MetadataResult memory);
```

**è¿”ã‚Šå€¤**:
```solidity
struct MetadataResult {
    string name;              // "NOROSI #123"
    string description;       // èª¬æ˜æ–‡
    string latitudeStr;       // "35.6789Â°N"
    string longitudeStr;      // "139.7661Â°E"
    string elevationStr;      // "10m (å¹³åœ°)"
    string distanceStr;       // "123.45 km"
    string attributes;        // JSONå±æ€§é…åˆ—
}
```

**ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚µã‚¤ã‚º**: ~8 KB

---

### 5. NOROSIFont.sol

**å½¹å‰²**: NOROSI ãƒ–ãƒ©ãƒ³ãƒ‰ã‚«ã‚¹ã‚¿ãƒ ãƒ•ã‚©ãƒ³ãƒˆã®æä¾›

**æ©Ÿèƒ½**:
- `Norosi-Regular.woff2` (4040ãƒã‚¤ãƒˆ) ã®Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ç‰ˆã‚’ä¿å­˜
- SVGå†…ã§ä½¿ç”¨ã™ã‚‹ãŸã‚ã®Data URIå½¢å¼ã§æä¾›

**å®šæ•°**:
```solidity
string public constant font =
    "data:application/font-woff2;charset=utf-8;base64,d09GMk9UVE8AAA/IAAk...";
```

**ãƒ•ã‚¡ã‚¤ãƒ«æƒ…å ±**:
- å…ƒã®ãƒ•ã‚¡ã‚¤ãƒ«: `Norosi-Regular.woff2` (4040 bytes)
- Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰å¾Œ: 5388 characters
- ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ: WOFF2 (Web Open Font Format 2)

**ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚µã‚¤ã‚º**: ~11 KB

---

### 6. DateTime.sol

**å½¹å‰²**: Unixã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‹ã‚‰æ—¥ä»˜ã¸ã®å¤‰æ›

**æ©Ÿèƒ½**:
- Rata Dieã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«ã‚ˆã‚‹é«˜é€Ÿãªæ—¥ä»˜è¨ˆç®—
- å¹´ãƒ»æœˆãƒ»æ—¥ã®æŠ½å‡º

**ä¸»è¦ãªé–¢æ•°**:
```solidity
function timestampToDate(uint256 timestamp)
    internal pure returns (uint256 year, uint256 month, uint256 day);
```

**ä½¿ç”¨ä¾‹**:
```solidity
(uint256 year, uint256 month, uint256 day) = DateTime.timestampToDate(1698765432);
// â†’ (2023, 10, 31)
```

**ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚µã‚¤ã‚º**: ~1 KB

---

### 7. SSTORE2.sol

**å½¹å‰²**: ã‚¬ã‚¹åŠ¹ç‡çš„ãªä¸å¤‰ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸

**æ©Ÿèƒ½**:
- ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆãƒã‚¤ãƒˆã‚³ãƒ¼ãƒ‰ã‚’åˆ©ç”¨ã—ãŸå¤§ããªãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜
- 55ãƒã‚¤ãƒˆä»¥ä¸Šã®ãƒ†ã‚­ã‚¹ãƒˆã«ä½¿ç”¨ï¼ˆã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚ˆã‚ŠåŠ¹ç‡çš„ï¼‰

**ä¸»è¦ãªé–¢æ•°**:
```solidity
library SSTORE2 {
    function write(bytes memory data) internal returns (address pointer);
    function read(address pointer) internal view returns (bytes memory);
}
```

**å‹•ä½œåŸç†**:
```
1. ãƒ‡ãƒ¼ã‚¿ã‚’CREATE opcodeã§æ–°è¦ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã¨ã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤
2. ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ãƒã‚¤ãƒ³ã‚¿ã¨ã—ã¦ä¿å­˜
3. èª­ã¿å–ã‚Šæ™‚ã¯EXTCODECOPYã§ãƒã‚¤ãƒˆã‚³ãƒ¼ãƒ‰ã‚’å–å¾—
```

**ã‚¬ã‚¹åŠ¹ç‡**:
- 54ãƒã‚¤ãƒˆä»¥ä¸‹: ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãŒåŠ¹ç‡çš„
- 55ãƒã‚¤ãƒˆä»¥ä¸Š: SSTORE2ãŒåŠ¹ç‡çš„ï¼ˆä¿å­˜æ™‚ã‚³ã‚¹ãƒˆé«˜ã€èª­ã¿å–ã‚Šæ™‚å®‰ä¾¡ï¼‰

**ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚µã‚¤ã‚º**: ~0.5 KB

---

### 8. SafeExternalCall.sol

**å½¹å‰²**: å®‰å…¨ãªå¤–éƒ¨ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆå‘¼ã³å‡ºã—

**æ©Ÿèƒ½**:
- å¤–éƒ¨ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã¸ã®é™çš„å‘¼ã³å‡ºã—ã®ãƒ©ãƒƒãƒ‘ãƒ¼
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®çµ±ä¸€åŒ–
- ã‚¬ã‚¹ä¸Šé™ã®è¨­å®š

**ä¸»è¦ãªé–¢æ•°**:
```solidity
library SafeExternalCall {
    function safeStaticCall(address target, bytes memory data)
        internal view returns (bool success, bytes memory returnData);
}
```

**ä½¿ç”¨ä¾‹**:
```solidity
(bool success, bytes memory data) =
    targetContract.safeStaticCall(abi.encodeWithSignature("getData()"));
```

**ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚µã‚¤ã‚º**: <0.5 KB

---

## ã‚¤ãƒ³ã‚¿ï¿½ï¿½ãƒ•ã‚§ãƒ¼ã‚¹

### IFumi.sol

Fumi.sol ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®šç¾©ã€‚

```solidity
interface IFumi {
    struct TokenSVGParams {
        uint256 tokenId;
        string text;
        uint256 colorIndex;
        uint256 refCount;
        uint256 timestamp;
        uint256 generation;
        uint256 treeIndex;
    }

    function tokenSVG(TokenSVGParams memory params)
        external view returns (string memory);
}
```

---

### IGeoMath.sol

GeoMath.sol ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®šç¾©ã€‚

```solidity
interface IGeoMath {
    function calculateDistance(
        int256 lat1, int256 lon1,
        int256 lat2, int256 lon2
    ) external pure returns (uint256);
}
```

---

### IGeoMetadata.sol

GeoMetadata.sol ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®šç¾©ã€‚

```solidity
interface IGeoMetadata {
    struct DecodedTokenData { ... }
    struct MetadataResult { ... }

    function formatMetadata(...)
        external pure returns (MetadataResult memory);
}
```

---

### IDateTime.sol

DateTime.sol ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®šç¾©ã€‚

```solidity
interface IDateTime {
    function timestampToDate(uint256 timestamp)
        external pure returns (uint256 year, uint256 month, uint256 day);
}
```

---

### IERC5521.sol

ERC-5521 (Referable NFT) ã®æ¨™æº–ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã€‚

```solidity
interface IERC5521 {
    event UpdateNode(
        address indexed contractAddr,
        uint256 indexed tokenId,
        address[] referAddresses,
        uint256[] referTokenIds
    );

    function referredOf(address contractAddr, uint256 tokenId)
        external view returns (address[] memory, uint256[] memory);
}
```

---

### IERC4906.sol

ERC-4906 (Metadata Update) ã®æ¨™æº–ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã€‚

```solidity
interface IERC4906 {
    event MetadataUpdate(uint256 _tokenId);
    event BatchMetadataUpdate(uint256 _fromTokenId, uint256 _toTokenId);
}
```

---

## ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

### ãƒ‡ãƒ—ãƒ­ã‚¤é †åº

ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆé–“ã®ä¾å­˜é–¢ä¿‚ã«ã‚ˆã‚Šã€ä»¥ä¸‹ã®é †åºã§ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼š

```
1. DateTime.sol          (ä¾å­˜ãªã—)
2. GeoMath.sol          (ä¾å­˜ãªã—)
3. GeoMetadata.sol      (ä¾å­˜ãªã—)
4. NOROSIFont.sol       (ä¾å­˜ãªã—)
   â†“
5. Fumi.sol             (DateTime, NOROSIFont ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒå¿…è¦)
   â†“
6. GeoRelationalNFT.sol (Fumi, GeoMath, GeoMetadata ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒå¿…è¦)
```

### ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

`scripts/deploy.ts` ã‚’ä½¿ç”¨ã—ã¾ã™ï¼š

```bash
# Amoy ãƒ†ã‚¹ãƒˆãƒãƒƒãƒˆã«ãƒ‡ãƒ—ãƒ­ã‚¤
npx hardhat run scripts/deploy.ts --network amoy

# Sepolia ãƒ†ã‚¹ãƒˆãƒãƒƒãƒˆã«ãƒ‡ãƒ—ãƒ­ã‚¤
npx hardhat run scripts/deploy.ts --network sepolia
```

### æœ€æ–°ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆV3.7.0 - 2026å¹´2æœˆ1æ—¥ï¼‰

**ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯**: Polygon Amoy Testnet (Chain ID: 80002)

| Contract | Address | æ¤œè¨¼æ¸ˆã¿ |
|----------|---------|----------|
| DateTime | [`0x20A287615768903478A97E526DEDfB8c5f7d1Bb6`](https://amoy.polygonscan.com/address/0x20A287615768903478A97E526DEDfB8c5f7d1Bb6) | âœ… |
| GeoMath | [`0xCBE6Fcdb1210CE68C0767Bc0a33f31E6c4D996e0`](https://amoy.polygonscan.com/address/0xCBE6Fcdb1210CE68C0767Bc0a33f31E6c4D996e0) | âœ… |
| GeoMetadata | [`0x963F740813e35Fa5573A0838F4aB18F21e20324F`](https://amoy.polygonscan.com/address/0x963F740813e35Fa5573A0838F4aB18F21e20324F) | âœ… |
| NOROSIFont | [`0x4E10895b2d9D0493aFac7C648991F79B7C7BfFcA`](https://amoy.polygonscan.com/address/0x4E10895b2d9D0493aFac7C648991F79B7C7BfFcA) | âœ… |
| Fumi | [`0xd4b3285aB4fCAE666207108E9e3432eBac24B3f9`](https://amoy.polygonscan.com/address/0xd4b3285aB4fCAE666207108E9e3432eBac24B3f9) | âœ… |
| **GeoRelationalNFT** | [`0xCF3C96a9a7080c5d8bBA706250681A9d27573847`](https://amoy.polygonscan.com/address/0xCF3C96a9a7080c5d8bBA706250681A9d27573847) | âœ… |

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: V3.7.0
**ãƒ†ã‚¹ãƒˆçµæœ**: 225 passing tests

è©³ç´°ã¯ [DEPLOYMENT_GUIDE.md](DEPLOYMENT_GUIDE.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

---

## é–‹ç™º

### ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«

```bash
pnpm compile
```

**è¨­å®š** (`hardhat.config.ts`):
- Solidity: 0.8.24
- Optimizer: æœ‰åŠ¹ï¼ˆ200 runsï¼‰
- EVM Target: shanghai
- viaIR: trueï¼ˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚µã‚¤ã‚ºæœ€é©åŒ–ï¼‰

### ãƒ†ã‚¹ãƒˆ

```bash
# ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
pnpm test

# ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆ
pnpm test:coverage

# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆã®ã¿å®Ÿè¡Œ
pnpm test -- --grep "should mint with H3 parameters"
```

**ãƒ†ã‚¹ãƒˆçŠ¶æ³**: 225 passing

### ã‚¬ã‚¹ãƒ¬ãƒãƒ¼ãƒˆ

```bash
REPORT_GAS=true pnpm test
```

### ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚µã‚¤ã‚ºãƒã‚§ãƒƒã‚¯

```bash
node check-size.js
```

---

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
packages/contracts/
â”œâ”€â”€ contracts/
â”‚   â”œâ”€â”€ GeoRelationalNFT.sol          # ãƒ¡ã‚¤ãƒ³NFT
â”‚   â”œâ”€â”€ Fumi.sol                      # SVGç”Ÿæˆ
â”‚   â”œâ”€â”€ interfaces/
â”‚   â”‚   â”œâ”€â”€ IFumi.sol
â”‚   â”‚   â”œâ”€â”€ IGeoMath.sol
â”‚   â”‚   â”œâ”€â”€ IGeoMetadata.sol
â”‚   â”‚   â”œâ”€â”€ IDateTime.sol
â”‚   â”‚   â”œâ”€â”€ IERC5521.sol
â”‚   â”‚   â””â”€â”€ IERC4906.sol
â”‚   â””â”€â”€ libraries/
â”‚       â”œâ”€â”€ DateTime.sol              # æ—¥æ™‚å¤‰æ›
â”‚       â”œâ”€â”€ NOROSIFont.sol            # ãƒ•ã‚©ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿
â”‚       â”œâ”€â”€ GeoMath.sol               # è·é›¢è¨ˆç®—
â”‚       â”œâ”€â”€ GeoMetadata.sol           # ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
â”‚       â”œâ”€â”€ SSTORE2.sol               # ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸æœ€é©åŒ–
â”‚       â””â”€â”€ SafeExternalCall.sol      # å®‰å…¨ãªå¤–éƒ¨å‘¼ã³å‡ºã—
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ deploy.ts                     # ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚   â”œâ”€â”€ generate-svg-by-colorindex.ts # SVGã‚µãƒ³ãƒ—ãƒ«ç”Ÿæˆ
â”‚   â”œâ”€â”€ mint-yamanote-line.ts         # å±±æ‰‹ç·šãƒŸãƒ³ãƒˆ
â”‚   â””â”€â”€ mint-test-nfts.ts             # ãƒ†ã‚¹ãƒˆNFTãƒŸãƒ³ãƒˆ
â”œâ”€â”€ test/
â”‚   â”œâ”€â”€ Fumi.test.ts                  # Fumi ãƒ†ã‚¹ãƒˆ (51 tests)
â”‚   â””â”€â”€ NOROSIFont.test.ts            # ãƒ•ã‚©ãƒ³ãƒˆ ãƒ†ã‚¹ãƒˆ (12 tests)
â”œâ”€â”€ deployments/                      # ãƒ‡ãƒ—ãƒ­ã‚¤è¨˜éŒ²
â”œâ”€â”€ artifacts/                        # ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æˆæœç‰©ï¼ˆgitignoreï¼‰
â”œâ”€â”€ cache/                            # Hardhat ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆgitignoreï¼‰
â”œâ”€â”€ typechain-types/                  # TypeScript å‹å®šç¾©ï¼ˆgitignoreï¼‰
â”œâ”€â”€ check-size.js                     # ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚µã‚¤ã‚ºãƒã‚§ãƒƒã‚¯
â”œâ”€â”€ hardhat.config.ts                 # Hardhatè¨­å®š
â””â”€â”€ README.md                         # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
```

---

## ã‚¬ã‚¹æœ€é©åŒ–æŠ€è¡“

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§æ¡ç”¨ã—ã¦ã„ã‚‹ä¸»è¦ãªã‚¬ã‚¹æœ€é©åŒ–æ‰‹æ³•ï¼š

### 1. Via IR ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«
```typescript
// hardhat.config.ts
viaIR: true  // Yulä¸­é–“è¡¨ç¾ã‚’ä½¿ç”¨ã—ãŸæœ€é©åŒ–
```

### 2. ãƒ¢ã‚¸ãƒ¥ãƒ©ãƒ¼ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- GeoMath, GeoMetadata ã‚’åˆ†é›¢ã—ã¦ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚µã‚¤ã‚ºã‚’å‰Šæ¸›
- immutable å¤‰æ•°ã§å¤–éƒ¨ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆå‚ç…§ï¼ˆSLOAD ã‚³ã‚¹ãƒˆå‰Šæ¸›ï¼‰

### 3. ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸
```solidity
// 54ãƒã‚¤ãƒˆä»¥ä¸‹: ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³
mapping(uint256 => string) private _texts;

// 55ãƒã‚¤ãƒˆä»¥ä¸Š: SSTORE2
mapping(uint256 => address) private _textPointers;
```

### 4. ã‚·ãƒ³ãƒ—ãƒ«ãª10é€²æ•°ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°
```solidity
// ãƒ“ãƒƒãƒˆãƒ‘ãƒƒã‚­ãƒ³ã‚°ã®ä»£ã‚ã‚Šã«10é€²æ•°æ¼”ç®—ï¼ˆã‚¬ã‚¹åŠ¹ç‡å‘ä¸Šï¼‰
tokenId = quadrant Ã— 10^20 + |latitude| Ã— 10^10 + |longitude|
```

### 5. LUT (Look-Up Table)
```solidity
// Fumi.sol: ã‚µã‚¤ãƒ³é–¢æ•°ã®äº‹å‰è¨ˆç®—å€¤ï¼ˆ2703ãƒã‚¤ãƒˆï¼‰
bytes constant SINE_LUT = hex"0000010203...";
```

### 6. ç›´æ¥ãƒãƒƒãƒ•ã‚¡æ›¸ãè¾¼ã¿
```solidity
// abi.encodePacked ã®ç¹°ã‚Šè¿”ã—ã‚’é¿ã‘ã‚‹
bytes memory buffer = new bytes(12000);
// ... ç›´æ¥æ›¸ãè¾¼ã¿ ...
```

---

## å‚è€ƒè³‡æ–™

### ERCã¨EIP
- [ERC-721: Non-Fungible Token Standard](https://eips.ethereum.org/EIPS/eip-721)
- [ERC-5521: Referable NFT](https://eips.ethereum.org/EIPS/eip-5521)
- [ERC-4906: Metadata Update Extension](https://eips.ethereum.org/EIPS/eip-4906)
- [EIP-712: Typed Structured Data Hashing](https://eips.ethereum.org/EIPS/eip-712)

### H3 Geospatial Indexing
- [H3: Uber's Hexagonal Hierarchical Spatial Index](https://h3geo.org/)

### ãƒ–ãƒ©ãƒ³ãƒ‰
- **åå‰**: NOROSI
- **ãƒ‰ãƒ¡ã‚¤ãƒ³**: https://norosi.xyz
- **ã‚·ãƒ³ãƒœãƒ«**: NOROSI

---

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

---

**Last Updated**: 2026å¹´2æœˆ
**Solidity Version**: 0.8.24
**OpenZeppelin**: v5.0.1
